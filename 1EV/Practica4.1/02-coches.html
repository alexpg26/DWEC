<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>02-coches</title>
</head>
<body>

    <div id="tabla-container"></div>
    
    <script type="text/javascript">

        //Ejercicio 3

        //Inicializamos una clase coche, en la que hacemos un constructor con todas las propiedas solicitadas 
        class Coche{
            constructor (marca, modelo, precio, anno_matriculacion, url){
                this._marca=marca;
                this._modelo=modelo;
                this._precio=precio;
                this._anno_matriculacion=anno_matriculacion;
                this._url=url;
            }

            get marca(){
                return this._marca;
            }
            get modelo(){
                return this._modelo;
            }
            get precio(){
                return this._precio;
            }
            get anno_matriculacion(){
                return this._anno_matriculacion;
            }
            get url(){
                return this._url;
            }

        }
        
        //Fuera de la clase, creamos las instancias de los objetos
        const Coche1 = new Coche("Cupra", "Formentor", "70.000", "2018", "./IMG/Cupra formentor.jpg");
        const Coche2 = new Coche("Hyundai", "Coupe", "3.000", "2002", "./IMG/hyundai coupe.jpg");
        const Coche3 = new Coche("Opel", "GT", "15.000", "2015", "./IMG/opel gt.jpg");
        const Coche4 = new Coche("Citroen", "C4", "30.000", "2012", "./IMG/citroen c4.jpg");
        const Coche5 = new Coche("Ford", "Kuga", "40.000", "2023", "./IMG/ford kuga.jpg");

        //Ahora creamos un array y le metemos dichos objetos
        const listaCoches = new Array();
        listaCoches[0] = Coche1;
        listaCoches[1] = Coche2;
        listaCoches[2] = Coche3;
        listaCoches[3] = Coche4;
        listaCoches[4] = Coche5;

        /*
        Si lo quisiésemos haber hecho con una funcion, lo hariamos tal que asi, manteniendo el constructor
        tal y como está, pero sin crear las instancias directamente y sin meter los objetos al array manualmente.
        El forEach se mantiene igual:

        Función para crear instancias de Coche
    
        function crearCoche(marca, modelo, precio, anno_matriculacion, url) {
        return new Coche(marca, modelo, precio, anno_matriculacion, url);
        }

        Crear una matriz de coches de manera más concisa
        
        const listaCoches = [
        crearCoche("Cupra", "Formentor", "70.000", "2018", "./IMG/Cupra formentor.jpg"),
        crearCoche("Hyundai", "Coupe", "3.000", "2002", "./IMG/hyundai coupe.jpg"),
        crearCoche("Opel", "GT", "15.000", "2015", "./IMG/Cupra formentor.jpg"),
        crearCoche("Citroen", "C4", "30.000", "2012", "./IMG/citroen c4.jpg"),
        crearCoche("Ford", "Kuga", "40.000", "2023", "./IMG/ford kuga.jpg"),
        ];

        */

        //Con un forEach, recorremos el array imprimiendo todos los elementos 
        listaCoches.forEach(function(elemento){
            console.log("Marca: " + elemento.marca)
            console.log("Modelo: " + elemento.modelo)
            console.log("Precio: " + elemento.precio)
            console.log("Año de matriculación: " + elemento.anno_matriculacion)
            console.log("URL: " + elemento.url)

        });

        //Ejercicio 4

        //Antes de empezar, creamos fuera del script una etiqueta div que contenga un id llamado tabla container
        //para agregar la tabla

        //Creamos una arrow function llamada tablaCoches que reciba como parámetro coches
        const tablaCoches = (coches) =>{

            //Dentro de la función creamos una variable tabla y creamos el elemento en el documento
            const tabla = document.createElement("table");
            //Aquí agregamos el HTML de la tabla, la primera fila con los header que se veran en negrita
            tabla.innerHTML = `
            <tr>
                <th>Marca</th>
                <th>Modelo</th>
                <th>Precio</th>
                <th>Año de Matriculación</th>
                <th>Imagen</th>
            </tr>
        `;

        //Aún dentro de la función tablaCoches, pasamos el parametro por un forEach para que saque
        //por cada fila "tr" los datos del objeto coche
            coches.forEach(function(coche){
            const fila = document.createElement("tr");
            fila.innerHTML = `
                <td>${coche.marca}</td>
                <td>${coche.modelo}</td>
                <td>${coche.precio}</td>
                <td>${coche.anno_matriculacion}</td>
                <td><img src="${coche.url}" alt="${coche.marca} ${coche.modelo}" width="100"></td>
            `;

            //Finalmente, añadimos la fila creada en el bucle a la tabla como un hijo de ella
            tabla.appendChild(fila);
        });

        //Aquí la función nos devuelve la tabla
        return tabla;

        }

        // Obtenemos el elemento en el que quiero insertar la tabla (por ejemplo, un div con id "tabla-container")
        const tablaContainer = document.getElementById("tabla-container");

        // Llamo a la función tablaCoches y agrego la tabla al contenedor
        tablaContainer.appendChild(tablaCoches(listaCoches));
        
    </script>

</body>
</html>